# CurrencyTest
Test task for Luxoft interview

Пояснения к проекту

1) Запустить проект можно файлом test.bat. Для того, чтобы запуск прошел успешно, необходимо иметь установленный maven. 
   Тестировался запуск под Windows.
2) В xls файле написаны сценарии. У меня не было цели придумать 100% покрытие, 
   указаны самые главные направления тестирования и приведены примеры тест кейсов.
3) Автоматизированы 3 сценария из xls файла - 1й, 2й, и 7й


Пояснения к коду.

1) В pom.xml файл подобраны версии библиотек, совместимых друг с другом, при которых Yandex Allure репорт успешно генерируется 
   после прогонки тестов.
2) Текстовая кодировка UTF-8.
3) В папке src/test находится пакет testcases. В нем единственный класс ConverterTest, содержащий тест кейсы.
   Благодаря testNG фреймворку была использована аннотация @DataProvider, существенно упрощающая написание однотипных сценариев
   с разными входными данными. Часто используемые действия вынесены в отдельные методы с аннотацией @Step для читаемости Allure репорта.
4) В соответсвие с заданием тесты выполняются в браузере Chrome, который для удобства открывается на весь экран. 
   Методы по открытию и закрытию браузера, а также по заданию свойств браузера, вынесены отдельно в тестовом классе с аннтациями testNG.
5) Для удобства и гибкости кода в папке src/main/resources/properties создан файлик пропертей, где можно указать путь до драйвера браузера,
   а также базовую ссылку на тестируемый сайт. Класс ReadPropertyData, обрабатывающий проперти, и предоставляющий API к их использованию находится в папке
   src/main/java в пакете utils.
6) Код тестов написан с использованием паттерна PageObject. Класс ConverterPage, представляющий страницу конвертера валют, находится 
   в src/main/java в пакете pages. Он содержит все необходимые локаторы, конструктор, проверяющий валидность страницы и методы для 
   взаимодействия со страницей.

Список улучшений и заметок.

1) ЗАМЕТКА: 
   В связи со свойством конвертера пришлось использовать один sleep в методе, который считывает данные результата конвертации. Дело в том,
   во время операции конвертации могут проскакивать промежуточные данные, которые не являются верным результатом. Тест кейс не дожидается
   последнего результата и считает промежуточный результат конечным.
   Предполагаемые smart решения, описаные далее, не помогли:
   a) в виде явного ожидания события explicit wait.until(ExpectedConditions ....). Wait также возвращал неверное промежуточное значение 
      вычисления. Цикл while в методе getInputValue без слипа также работает некорректно и не может дождаться окончательного результата
      конвертации
   b) Был испробован метод, который ожидал пока все AJAX запросы завершатся.  Метод использовал функции класса JavascriptExecutor, ожидающие 
      закрытия всех jQuery запросов. По факту AJAX запросы завершались, тест выцеплял промежуточное значения вычисления и переставал следить
      за дальнейшими AJAX запросами, которые выдавали в итоге конечный верный результат.
2) Для удобства чтения и использования кода можно все локаторы перечислить в enum, который будет инициализироваться внутри PageObject класса
3) Для универсальности задания локаторов можно использовать regexp-ы, так как локаторы очень похожи и просты
4) Если бы конвертер генерировал более чем одну HTML страницу, то для создания PageObject можно воспользоваться фабричным методом.
   В данном случае страница только одна, этот подход избыточен.
5) с помощью лямбда-выражений можно заничетльно укоротить код, заменив методы, вносящие данные в поля ввода/вывода, одним-двумя
    функциональными интерфесами.
    
